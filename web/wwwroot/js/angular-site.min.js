(function(){"use strict";angular.module("gobel-app",["ngMaterialDatePicker"])})(),function(){"use strict";function n(n){function t(){n.loader=!0;$.ajax({method:"POST",url:"/api/exams/create",type:"json",data:{id:$("#UnitId").val(),model:n.exam},success:function(){n.loader=!1;yay("Exam scheduled successfully! Redirecting in a few...");setTimeout(function(){window.location="/exams"},1e3)},error:function(t){t.responseText?parseError(t.responseText):error(t.statusText);n.loader=!1}});n.loader=!1}n.questions=[];n.question={Answers:[]};n.onAddQuestion=function(){n.question={Answers:[]};$("#addQuestionModal").modal("show")};n.onAddAnswer=function(){n.question.Text?(n.question.Answers.push(n.answer),n.answer={}):error("Type a question first before adding answer options.")};n.onExitQuestion=function(){n.question={Answers:[]};$("#addQuestionModal").modal("hide")};n.onRemoveQuestion=function(t){var i=n.questions.indexOf(t);n.questions.splice(i)};n.onSubmitQuestion=function(){if(n.question)if(n.question.Answers.length<1)error("Your question has no answers. Please add answer options");else{var t=parseFloat(n.question.Marks);n.question.Marks=t;n.questions.push(n.question);n.question={Answers:[]}}else error("No question written.")};n.onSubmitExam=function(){if(n.exam={},n.exam.Name=n.Name,n.exam.Date=moment(n.examDate).format(),n.exam.Start=moment(n.StartTime,"hh:mm a").format(),n.exam.End=moment(n.EndTime,"hh:mm a").format(),n.exam.Questions=n.questions,!n.Name){error("Specify exam title/name. e.g Supplementary exam, Final year exam e.t.c");return}if(n.examDate===undefined){error("Choose a date for this exam.");return}if(n.StartTime===undefined||n.EndTime===undefined){error("Choose start and end time for this exam.");return}if(n.questions<1){error("Exam has no questions. Add at-least one question to continue.");return}t()}}angular.module("gobel-app").controller("examCtrl",n);n.$inject=["$scope"]}();