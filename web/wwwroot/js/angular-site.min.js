(function(){"use strict";angular.module("gobel-app",["ngMaterialDatePicker","ngSanitize"])})(),function(){"use strict";function n(n){function i(){n.loader=!0;$.ajax({method:"POST",url:"/api/exams/create",type:"json",data:{id:$("#UnitId").val(),model:n.exam},success:function(){n.loader=!1;yay("Exam scheduled successfully! Redirecting in a few...");setTimeout(function(){window.location="/exams"},1e3)},error:function(t){t.responseText?parseError(t.responseText):error(t.statusText);n.loader=!1}});n.loader=!1}function r(){n.loader=!0;n.exams=[];$.ajax({method:"GET",url:"/api/exams",success:function(t){if(t instanceof Array)if(t.length<1)info("You have no exams scheduled yet!");else for(var i=0;i<t.length;i++)n.$apply(function(){n.exams.push(t[i])})},error:function(n){n.responseText?parseError(n.responseText):error(n.statusText)}});n.loader=!1}function u(t){n.detailsLoader=!0;$.ajax({method:"GET",url:"/api/exams/"+t,success:function(t){n.$apply(function(){n.selectedExam=t});f()},error:function(n){n.responseText?parseError(n.responseText):error(n.statusText)}});n.detailsLoader=!1}function f(){$(".accordion-section-title").click(function(n){var i=$(this).attr("href");$(n.target).is(".active")?(t(),n.target.children[1].firstElementChild.className="fa fa-plus"):(t(),$(this).addClass("active"),n.target.children[1].firstElementChild.className="fa fa-minus",$(".accordion "+i).slideDown(300).addClass("open"));n.preventDefault()})}function t(){$(".accordion .accordion-section-title").removeClass("active");$(".accordion .accordion-section-content").slideUp(300).removeClass("open")}function e(t){n.loader=!0;n.exams=[];$.ajax({method:"GET",url:"/api/exams/unit/"+t,success:function(t){if(t instanceof Array)if(t.length<1)info("You have no exams scheduled yet!");else for(var i=0;i<t.length;i++)n.$apply(function(){n.exams.push(t[i])})},error:function(n){n.responseText?parseError(n.responseText):error(n.statusText)}});n.loader=!1}function o(t){n.loader=!0;$.ajax({method:"GET",url:"/api/exams/sessions/"+t,success:function(n){h(n)},error:function(n){n.responseText?parseError(n.responseText):error(n.statusText)}});n.loader=!1}function s(t){n.courseWrkLoader={};n.courseWrkLoader.IsActive=!0;n.courseWrkLoader.Text="loading coursework progress...";$.ajax({method:"GET",url:"/api/progress/unit/"+t+"/my",success:function(t){t.data.length>0?n.$apply(function(){n.courseworkprogress=t.data;n.courseWrkLoader.IsActive=!1;n.courseWrkLoader.Text=""}):n.$apply(function(){n.courseWrkLoader.IsActive=!1;info("This unit has not coursework materials uploaded.")})},error:function(t){n.courseWrkLoader.IsActive=!1;n.courseWrkLoader.Text="";t.responseText?parseError(t.responseText):error(t.statusText)}})}function h(t){n.$apply(function(){n.title="Exam Session, Id: "+t.sessionId.substring(0,6);n.session=t;$("#rootwizard").bootstrapWizard({onTabShow:function(n,t,i){if(i>0){var r=t.find("li").length-1,u=i+1,f=u/r*100;$("#rootwizard .progress-bar").css({width:f+"%"})}}})});console.log(t)}n.title="";n.exams=[];n.questions=[];n.question={Answers:[]};n.calendarDate=function(n){return moment().to(n)};n.minutesToExam=function(n){var t=new moment(n),i=new moment,r=moment.duration(t.diff(i)).as("minutes");return roundOff(r,2)};n.onInitExamIndex=function(){n.title="Examinations";r()};n.onInitUnitExams=function(n){e(n)};n.initExamSession=function(t){n.title="Session";o(t)};n.initCourseWrkProgress=function(n){s(n)};n.onAddQuestion=function(){n.question={Answers:[]};$("#addQuestionModal").modal("show")};n.onAddAnswer=function(){n.question.Text?(n.question.Answers.push(n.answer),n.answer={}):error("Type a question first before adding answer options.")};n.onExitQuestion=function(){n.question={Answers:[]};$("#addQuestionModal").modal("hide")};n.onRemoveQuestion=function(t){var i=n.questions.indexOf(t);n.questions.splice(i)};n.onSubmitQuestion=function(){if(n.question)if(n.question.Answers.length<1)error("Your question has no answers. Please add answer options");else{var t=parseFloat(n.question.Marks);n.question.Marks=t;n.questions.push(n.question);n.question={Answers:[]}}else error("No question written.")};n.onSubmitExam=function(){if(n.exam={},n.exam.Name=n.Name,n.exam.Date=moment(n.examDate).format(),n.exam.Start=moment(n.StartTime,"hh:mm a").format(),n.exam.End=moment(n.EndTime,"hh:mm a").format(),n.exam.Questions=n.questions,!n.Name){warning("Specify exam title/name. e.g Supplementary exam, Final year exam e.t.c");return}if(n.examDate===undefined){warning("Pick a date for this exam.");return}if(n.StartTime===undefined||n.EndTime===undefined){warning("Pick start and end time for this exam.");return}if(n.questions<1){warning("Exam has no questions. Add at-least one question to continue.");return}i()};n.onSelectExam=function(t){n.selectedExam=t;$("#examDetailsModal").modal("show");u(t.id)}}angular.module("gobel-app").controller("examCtrl",n);n.$inject=["$scope","$timeout","$interval"]}(),function(){"use strict";function n(n){function t(){}function i(){n.loader=!0;$.ajax({method:"GET",url:"/api/notifications",success:function(n){r(n)},error:function(t){t.responseText?parseError(t.responseText):error(t.statusText);n.loader=!1}})}function r(t){t instanceof Array?n.$apply(function(){n.notifications=t;n.loader=!1}):console.log(t);setTimeout(function(){u()},1e4)}function u(){var t=n.notifications.filter(n=>n.read===!1);t.length>0&&$.ajax({method:"POST",url:"/api/notifications/markasread",type:"json",data:{notifications:t},success:function(t){t instanceof Array&&n.$apply(function(){n.notifications=t})},error:function(n){n.responseText?parseError(n.responseText):error(n.statusText)}})}function f(n){$.ajax({method:"DELETE",url:"/api/notifications/"+n.id,success:function(t){yay(t);e(n)},error:function(n){n.responseText?parseError(n.responseText):error(n.statusText)}})}function e(t){var i=n.notifications.indexOf(t);n.$apply(function(){n.notifications.splice(i,1)})}n.title="My Notifications";n.notifications=[];t();n.initNotifications=function(){i()};n.normalizeDate=function(n){return moment().to(n.timestamp)};n.onDelete=function(n){f(n)}}angular.module("gobel-app").controller("notificationsCtrl",n);n.$inject=["$scope"]}(),function(){"use strict";function n(n,t){function f(){$("footer ul li").on("click",function(t){var i=parseInt(t.target.innerText)-1;u(i);n.$apply(function(){n.selectedQue=n.questions[i]})});$(".next").on("click",function(){var n=r()+1;i(n)});$(".prev").on("click",function(){var n=r()-1;i(n)})}function i(t){var i=n.questions.length;t<0||t>i-1||(u(t),n.$apply(function(){n.selectedQue=n.questions[t]}))}function r(){return n.questions.indexOf(n.selectedQue)}function u(n){$("footer ul li").each(function(t){t!==n?$(this).removeClass("active"):$(this).addClass("active")})}function e(n){$("#loadingModal").modal("show");setTimeout(function(){$.ajax({method:"GET",url:"/api/exams/sessions/"+n,success:function(n){console.log(n);o(n)},error:function(n){n.responseText?parseError(n.responseText):error(n.statusText)}});$("#loadingModal").modal("hide")},2e3)}function o(i){n.$apply(function(){n.session=i;n.targetTime=moment(i.exam.end);n.questions=i.exam.questions});$("footer ul").empty();for(var r=0;r<n.questions.length;r++)$("footer ul").append("<li>"+(r+1)+"<\/li>");n.questions.length>0&&(u(0),n.$apply(function(){n.selectedQue=n.questions[0]}));t(s,1e3);f()}function s(){var f=moment(n.targetTime).subtract(1,"seconds"),e=new moment,t=moment.duration(f.diff(e)),i,r,u;i=t.get("hours");r=t.get("minutes");u=t.get("seconds");$(".remaining-time").text(i+":"+r+":"+u)}n.title="Exam Session Controller";n.session={};n.questions=[];n.selectedQue={};n.targetTime=null;n.initSession=function(n){e(n)};n.getIndex=function(t){return n.questions.indexOf(t)+5};n.onNext=function(){};n.onPrev=function(){i(r()-1)}}angular.module("gobel-app").controller("sessionCtrl",n);n.$inject=["$scope","$interval"];
/*!
     * Mock implementation of Threading
    */
}();