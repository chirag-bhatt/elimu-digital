function postCourse(){course.Name=$("#courseName").val();course.Type=$("#courseType").val();loadingBtn("btnSubmit",!0);$.ajax({type:"POST",url:"/api/courses",data:{schoolId:1,model:course},dataType:"json",error:function(n){n.status===200?(loadingBtn("btnSubmit",!1),yay(n.responseText),setTimeout(function(){location.reload()},700)):(loadingBtn("btnSubmit",!1),error(n.responseText))}})}function onDeleteCourse(n){$.confirm({theme:"supervan",title:"Delete this record?",content:"Are you sure you want to delete this course?",type:"red",typeAnimated:!0,buttons:{yes:{text:"Delete",btnClass:"btn-red",action:function(){deleteCourse(n)}},No:function(){}}})}function deleteCourse(n){$.confirm({theme:"supervan",content:function(){var t=this;return $.ajax({url:"/api/courses/"+n,dataType:"json",method:"DELETE"}).fail(function(n){n.status===200?(t.setType("green"),t.setIcon("fa fa-check-circle"),t.setTitle(n.responseText),t.setContent("Record deleted successfully."),t.onAction=function(){setTimeout(function(){location.reload()},500)}):(t.setType("red"),t.setIcon("fa fa-ban"),t.setContent(n.responseText),t.setTitle(n.statusText))})}})}function onSearch(){}function loadingBtn(n,t){$("#"+n).prop("disabled",t);t?(btn_text=$("#"+n).text(),$("#"+n).html("<i class='fa fa-circle-o-notch fa-spin'><\/i> posting...")):$("#"+n).text(btn_text)}function yay(n){toastr.success(n)}function error(n){toastr.error(n)}function deleteConfirm(){}function disableLink(n){n.preventDefault();$(this).prop("disabled",!0)}function postUnit(){unit.Name=$("#unitName").val();loadingBtn("unitBtnSubmit",!0);$.ajax({type:"POST",url:"/api/units",data:{courseId:$("#CourseId").val(),model:unit},dataType:"json",error:function(n){console.log(n);n.status===200||n.status===201?(loadingBtn("unitBtnSubmit",!1),yay(n.responseText),setTimeout(function(){location.reload()},700)):(loadingBtn("unitBtnSubmit",!1),n.responseText?error(n.responseText):error(n.statusText))}})}function onAssignLecturer(n,t){unit.id=t;$("#unit_assign").text(n);$("#lecSelect").empty();$.ajax({method:"GET",url:"/api/lecturers",success:function(n){$("#lecs-loader").hide();var t=new Option("-- Select --","");if($("#lecSelect").append(t),n.length>0)for(i=0;i<n.length;i++)AddLecToOptions(n[i])},error:function(n){console.log(n)}})}function AddLecToOptions(n){var t=new Option(n.profile.fullNames,n.id);$("#lecSelect").append(t)}function pushAssignLec(){var n=$("#lecSelect").val();$.ajax({method:"POST",url:"/api/units/"+unit.id+"/assignLecturer/"+n,success:function(n){yay(n);setTimeout(function(){location.reload()},1e3)},error:function(n){error(n.responseText)}})}function onAllocateUnit(n,t){unit.id=t;$("#unit_allocate").text(n);$("#roomSelect").empty();$.ajax({method:"GET",url:"/api/classes",success:function(n){$("#rooms-loader").hide();var t=new Option("-- Select --","");if($("#roomSelect").append(t),n.length>0)for(i=0;i<n.length;i++)AddRoomToOptions(n[i])},error:function(n){console.log(n)}})}function AddRoomToOptions(n){var t=new Option(n.room+", "+n.startTime+" - "+n.endTime+", "+n.dayOfWeek,n.id);$("#roomSelect").append(t)}function pushAllocateUnit(){var n=$("#roomSelect").val();$.ajax({method:"POST",url:"/api/classes/"+n+"/allocateToUnit/"+unit.id,success:function(n){yay(n);setTimeout(function(){location.reload()},1e3)},error:function(n){error(n.responseText)}})}var course={},btn_text,unit;$("#courseForm").submit(function(n){n.preventDefault();postCourse()});btn_text="";unit={};$("#unitForm").submit(function(n){n.preventDefault();postUnit()});$("#unitBtnSubmit").click(function(n){n.preventDefault();postUnit()});$("#assignLecForm").submit(function(n){n.preventDefault();pushAssignLec()});$("#allocateUnitForm").submit(function(n){n.preventDefault();pushAllocateUnit()});